@page
@model Ticket_Hive.UI.Pages.Member.AdminPageModel
@{
}
<div class="container">
    <div class="row">
        <a class="btn w-25" asp-page="/Member/Home">Home</a>
    </div>
    <div class="row">
        <div class="col-12">
            <h1>Admin Page</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 col-6">
            <form method="post" asp-page-handler="Add">
                <label for="input-name">Name:</label>
                <input type="text" id="input-name" asp-for="Name"/>
                
                <label for="input-type">Type:</label>
                <input type="text" id="input-type" asp-for="EventType"/>
                
                <label for="input-location">Location:</label>
                <input type="text" id="input-location" asp-for="Location"/>
                
                <label for="input-date">Date:</label>
                <input type="datetime" id="input-date" asp-for="DateTime"/>
                
                <label for="input-price">Price:</label>
                <input type="number" id="input-price" asp-for="Price"/>
                
                <label for="input-capacity">Capacity:</label>
                <input type="number" id="input-capacity" asp-for="Capacity" />
                
                <input type="submit" class="btn" value="Add Event" />
            </form>
        </div>
        <div class="col-md-12 col-6">
            <h3>Events</h3>
            <form method="post" asp-page-handler="Delete" id="event-form">
                <input id="event-id-input" type="hidden" value="" asp-for="EventToDelete">
                <table>
                    <tr>
                        <td><strong>Event</strong></td>
                        <td><strong>Date</strong></td>
                        <td></td>
                    </tr>
                    @foreach (var item in Model.Events)
                    {
                        <tr>
                            <td>@item.Name : </td>
                            <td>@item.DateTime.ToShortDateString()</td>
                            <td>
                                @*<input type="hidden" asp-for="@item.User">*@
                                <input id="@item.Id" class="@item.Id DeleteButton w-25" type="button"  value="Delete"/>
                            </td>
                        </tr>
                    }
                </table>
            </form>
        </div>
       
</div>

    @section Scripts {
        <script>
            //let input = document.querySelector("#quantity-input");

            document.addEventListener("click", function (event) {
                if (event.target.classList.contains('DeleteButton')) {
                    let form = document.querySelector("#event-form");

                    // Ny kvanitet
                    let newQuantity = event.target.value;
                    // Vilket event?
                    let eventId = event.target.id;
                    console.log(eventId);
                    let eventIdInput = document.querySelector("#event-id-input");
                    eventIdInput.value = eventId;

                    form.submit();
                }
            });
        </script>
    }
